(function(e,storage,metro,common,ui,toasts,assets){"use strict";var findByStoreName=metro.findByStoreName,findByProps=metro.findByProps,React=common.React,RN=common.ReactNative,useProxy=storage.useProxy,pluginStorage=storage.storage,showToast=toasts.showToast;var ScrollView=RN.ScrollView,View=RN.View,Text=RN.Text,TouchableOpacity=RN.TouchableOpacity,TextInput=RN.TextInput,Alert=RN.Alert,Clipboard=RN.Clipboard,StyleSheet=RN.StyleSheet;var ChannelStore=findByStoreName("ChannelStore"),UserStore=findByStoreName("UserStore"),FluxDispatcher=findByProps("dispatch","subscribe");if(pluginStorage.targetUserId===void 0)pluginStorage.targetUserId="";if(pluginStorage.senderUserId===void 0)pluginStorage.senderUserId="";if(pluginStorage.messageContent===void 0)pluginStorage.messageContent="";if(pluginStorage.embedTitle===void 0)pluginStorage.embedTitle="";if(pluginStorage.embedDescription===void 0)pluginStorage.embedDescription="";if(pluginStorage.embedImageUrl===void 0)pluginStorage.embedImageUrl="";async function injectFakeMessage(){var targetUserId=pluginStorage.targetUserId,senderUserId=pluginStorage.senderUserId,messageContent=pluginStorage.messageContent,embedTitle=pluginStorage.embedTitle,embedDescription=pluginStorage.embedDescription,embedImageUrl=pluginStorage.embedImageUrl;if(!targetUserId||!targetUserId.trim()){Alert.alert("Error","Please enter a Target User ID!");return}if(!senderUserId||!senderUserId.trim()){Alert.alert("Error","Please enter a Sender User ID!");return}if(!messageContent||!messageContent.trim()){Alert.alert("Error","Please enter message content!");return}try{var channelId=null,privateChannels=ChannelStore.getSortedPrivateChannels();for(var i=0;i<privateChannels.length;i++){var channel=privateChannels[i];if(channel.recipients&&channel.recipients.some(function(r){return r.id===targetUserId})){channelId=channel.id;break}}if(!channelId)channelId=String(Date.now()*4194304+Math.floor(Math.random()*4194304));var sender=UserStore.getUser(senderUserId);if(!sender){Alert.alert("Error","Could not find sender user!");return}var embeds=[];if(embedTitle||embedDescription||embedImageUrl){var embed={type:"rich",color:5793266};if(embedTitle)embed.title=embedTitle;if(embedDescription)embed.description=embedDescription;if(embedImageUrl)embed.image={url:embedImageUrl,proxy_url:embedImageUrl};embeds.push(embed)}var fakeMessage={id:String(Date.now()*4194304+Math.floor(Math.random()*4194304)),type:0,channel_id:channelId,author:{id:sender.id,username:sender.username,discriminator:sender.discriminator||"0",avatar:sender.avatar,bot:sender.bot||false,global_name:sender.globalName||sender.username},content:messageContent,timestamp:new Date().toISOString(),edited_timestamp:null,tts:false,mention_everyone:false,mentions:[],mention_roles:[],attachments:[],embeds:embeds,pinned:false,flags:0};FluxDispatcher.dispatch({type:"MESSAGE_CREATE",channelId:channelId,message:fakeMessage,optimistic:false,isPushNotification:false});showToast("Fake message sent!",assets.getAssetIDByName("Check"))}catch(error){console.error("Message Injector Error:",error);Alert.alert("Error","Failed: "+(error&&error.message||"Unknown"))}}function sendQuickTest(){var currentUser=UserStore.getCurrentUser();if(!currentUser){Alert.alert("Error","Could not get current user!");return}var orig={t:pluginStorage.targetUserId,s:pluginStorage.senderUserId,c:pluginStorage.messageContent};pluginStorage.targetUserId=currentUser.id;pluginStorage.senderUserId=currentUser.id;pluginStorage.messageContent="Test message from Message Injector!";injectFakeMessage();pluginStorage.targetUserId=orig.t;pluginStorage.senderUserId=orig.s;pluginStorage.messageContent=orig.c}async function pasteClip(field){try{var text=await Clipboard.getString();if(text){pluginStorage[field]=text;showToast("Pasted!",assets.getAssetIDByName("Check"))}}catch(err){Alert.alert("Error","Failed to paste")}}var styles=StyleSheet.create({container:{flex:1},section:{backgroundColor:"#2b2d31",borderRadius:8,margin:12,padding:16},sectionTitle:{color:"#b5bac1",fontSize:12,fontWeight:"700",marginBottom:8},desc:{color:"#949ba4",fontSize:14,marginBottom:12},label:{color:"#b5bac1",fontSize:14,fontWeight:"600",marginTop:16,marginBottom:4},sublabel:{color:"#6d6f78",fontSize:12,marginBottom:8},input:{backgroundColor:"#1e1f22",color:"#dbdee1",borderRadius:4,padding:12,fontSize:16,borderWidth:1,borderColor:"#3f4147"},multiInput:{minHeight:80,textAlignVertical:"top"},pasteBtn:{backgroundColor:"#5865f2",borderRadius:4,padding:14,alignItems:"center",marginTop:8},sendBtn:{backgroundColor:"#5865f2",borderRadius:4,padding:16,alignItems:"center",marginTop:20},testBtn:{backgroundColor:"#f0a020",borderRadius:4,padding:16,alignItems:"center",marginTop:10},btnText:{color:"#fff",fontSize:16,fontWeight:"600"}});function Settings(){useProxy(pluginStorage);return React.createElement(ScrollView,{style:styles.container},React.createElement(View,{style:styles.section},React.createElement(Text,{style:styles.sectionTitle},"MESSAGE FAKER"),React.createElement(Text,{style:styles.desc},"Inject fake messages into DMs from anyone.")),React.createElement(View,{style:styles.section},React.createElement(Text,{style:styles.sectionTitle},"CREATE FAKE MESSAGE"),React.createElement(Text,{style:styles.label},"TARGET USER ID"),React.createElement(Text,{style:styles.sublabel},"User ID of DM to inject into"),React.createElement(TextInput,{style:styles.input,value:pluginStorage.targetUserId,onChangeText:function(t){pluginStorage.targetUserId=t},placeholder:"Target User ID...",placeholderTextColor:"#4e5058"}),React.createElement(TouchableOpacity,{style:styles.pasteBtn,onPress:function(){pasteClip("targetUserId")}},React.createElement(Text,{style:styles.btnText},"Paste Target User ID")),React.createElement(Text,{style:styles.label},"FROM USER ID"),React.createElement(Text,{style:styles.sublabel},"Who the message appears from"),React.createElement(TextInput,{style:styles.input,value:pluginStorage.senderUserId,onChangeText:function(t){pluginStorage.senderUserId=t},placeholder:"Sender User ID...",placeholderTextColor:"#4e5058"}),React.createElement(TouchableOpacity,{style:styles.pasteBtn,onPress:function(){pasteClip("senderUserId")}},React.createElement(Text,{style:styles.btnText},"Paste Sender User ID")),React.createElement(Text,{style:styles.label},"MESSAGE CONTENT"),React.createElement(TextInput,{style:[styles.input,styles.multiInput],value:pluginStorage.messageContent,onChangeText:function(t){pluginStorage.messageContent=t},placeholder:"Message text...",placeholderTextColor:"#4e5058",multiline:true}),React.createElement(Text,{style:[styles.label,{marginTop:24}]},"OPTIONAL EMBED"),React.createElement(Text,{style:styles.label},"EMBED TITLE"),React.createElement(TextInput,{style:styles.input,value:pluginStorage.embedTitle,onChangeText:function(t){pluginStorage.embedTitle=t},placeholder:"Embed title...",placeholderTextColor:"#4e5058"}),React.createElement(Text,{style:styles.label},"EMBED DESCRIPTION"),React.createElement(TextInput,{style:[styles.input,styles.multiInput],value:pluginStorage.embedDescription,onChangeText:function(t){pluginStorage.embedDescription=t},placeholder:"Embed description...",placeholderTextColor:"#4e5058",multiline:true}),React.createElement(Text,{style:styles.label},"EMBED IMAGE URL"),React.createElement(TextInput,{style:styles.input,value:pluginStorage.embedImageUrl,onChangeText:function(t){pluginStorage.embedImageUrl=t},placeholder:"Image URL...",placeholderTextColor:"#4e5058"}),React.createElement(TouchableOpacity,{style:styles.sendBtn,onPress:injectFakeMessage},React.createElement(Text,{style:styles.btnText},"Send Fake Message")),React.createElement(TouchableOpacity,{style:styles.testBtn,onPress:sendQuickTest},React.createElement(Text,{style:styles.btnText},"Quick Test Message"))))}var plugin={onLoad:function(){window.injectMessage=injectFakeMessage;console.log("[Message Injector] Loaded!")},onUnload:function(){delete window.injectMessage;console.log("[Message Injector] Unloaded!")},settings:Settings};e.default=plugin;Object.defineProperty(e,"__esModule",{value:true});return e})({},vendetta.storage,vendetta.metro,vendetta.metro.common,vendetta.ui,vendetta.ui.toasts,vendetta.ui.assets);
